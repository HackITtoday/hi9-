<link rel="import" href="../bower_components/firebase-element/firebase-document.html">

<dom-module id="firebase-data">
  <template>
    <firebase-document data="{{data}}" location="{{userUrl}}">
    </firebase-document>
  </template>
</dom-module>
<script>
  ;(function () {
    var log
    Polymer({
      is: 'firebase-data',
      properties: {
        data:{ 
          type: Object, notify: true, observer: '_dataChanged'
        },
        userUrl: {
          computed:"getUserDataUrl(uid)"
        },
        uid: String
      },
      getUserDataUrl: function(uid) {
        return "https://hi9site.firebaseio.com/users/" + uid;
      },
      get: function(val){
        return val
      },
      _dataChanged: function(data) {
        if (!data) {
          this.data = {};
        } elseif (!log) {
          log = true
          if (!this.data.log) {
            this.data.log = [{first:new Date}]
          } else {
            this.data.log.push({next:new Date})
          }
        }
      }
    });
  })();
</script>
